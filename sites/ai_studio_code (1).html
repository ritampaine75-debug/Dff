<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>Prominator | AI Mobile Web Architect</title>
    <meta name="description" content="Professional AI Prompt Architect for building high-end mobile websites instantly.">
    
    <!-- PWA SETTINGS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0F0E13">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2103/2103633.png">
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/2103/2103633.png">
    <link rel="manifest" href='data:application/json,{"name":"Prominator","short_name":"Prominator","start_url":".","display":"standalone","background_color":"#0F0E13","theme_color":"#0F0E13","icons":[{"src":"https://cdn-icons-png.flaticon.com/512/2103/2103633.png","sizes":"512x512","type":"image/png"}]}'>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #0F0E13; color: #E6E1E5; margin: 0; }

        /* GOOGLE SPLASH SCREEN */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #ffffff; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 1000;
            transition: opacity 0.5s ease-out, visibility 0.5s;
        }
        .dot { width: 15px; height: 15px; border-radius: 50%; animation: bounce 1.2s infinite ease-in-out; }
        .dot:nth-child(1) { background: #4285F4; animation-delay: -0.32s; }
        .dot:nth-child(2) { background: #EA4335; animation-delay: -0.16s; }
        .dot:nth-child(3) { background: #FBBC05; animation-delay: -0.08s; }
        .dot:nth-child(4) { background: #34A853; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }

        .glass-card { background: rgba(28, 27, 31, 0.9); backdrop-filter: blur(15px); border-radius: 30px; border: 1px solid rgba(255,255,255,0.05); }
        .input-box { background: #232127; border-radius: 18px; padding: 15px; border: 2px solid transparent; transition: 0.3s; }
        .input-box:focus-within { border-color: #D0BCFF; }

        .cta-btn { background: linear-gradient(135deg, #D0BCFF 0%, #9370DB 100%); color: #1C1B1F; font-weight: 800; border-radius: 20px; }
        
        /* DOWNLOAD BUTTON STYLE */
        .download-btn {
            background: #ffffff; color: #000000;
            border-radius: 15px; padding: 16px; font-weight: 800;
            display: flex; items-center; justify-content: center; gap: 10px;
            box-shadow: 0 0 20px rgba(255,255,255,0.2);
        }

        #toast { visibility: hidden; background: #D0BCFF; color: #1C1B1F; padding: 12px 25px; border-radius: 50px; position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%); font-weight: bold; z-index: 1000; }
        #toast.show { visibility: visible; animation: slideUp 0.3s forwards; }
        @keyframes slideUp { from { bottom: 0; opacity: 0; } to { bottom: 40px; opacity: 1; } }
    </style>
</head>
<body class="pb-10">

    <div id="splash-screen">
        <div class="flex gap-2 mb-4">
            <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
        </div>
        <p style="color: #5f6368; font-weight: 500; font-size: 14px;">PROMINATOR</p>
    </div>

    <header class="p-6 flex justify-between items-center sticky top-0 bg-[#0F0E13]/90 backdrop-blur-lg z-50">
        <div>
            <h1 class="text-2xl font-black text-white">PROMINATOR</h1>
            <p class="text-[10px] text-[#D0BCFF] font-bold tracking-[3px]">APP ENGINE v5.1</p>
        </div>
        <button onclick="toggleSettings()" class="w-12 h-12 rounded-2xl bg-[#1C1B1F] flex items-center justify-center border border-white/10">
            <i class="fas fa-bars text-[#D0BCFF]"></i>
        </button>
    </header>

    <main class="px-5 mt-4 space-y-6">
        <div class="glass-card p-6 space-y-5">
            <div>
                <label class="text-[11px] font-bold text-[#D0BCFF] uppercase mb-2 block tracking-widest">Project Concept</label>
                <div class="input-box">
                    <textarea id="websiteIdea" rows="3" class="w-full bg-transparent border-none outline-none text-white text-base" placeholder="Describe the app/site..."></textarea>
                </div>
            </div>
            <button onclick="generatePrompt()" id="mainBtn" class="cta-btn w-full py-5 flex items-center justify-center gap-3">
                <span id="btnText">CONSTRUCT MOBILE PROMPT</span>
                <div id="loader" class="hidden w-5 h-5 border-2 border-[#1C1B1F] border-t-transparent rounded-full animate-spin"></div>
            </button>
        </div>

        <div id="outputContainer" class="hidden">
            <div class="glass-card overflow-hidden border-[#D0BCFF]/30 border">
                <div class="px-5 py-3 bg-[#D0BCFF]/10 flex justify-between items-center">
                    <span class="text-[10px] font-black uppercase text-[#D0BCFF]">Final Architecture</span>
                    <button onclick="copyToClipboard()" class="text-[#D0BCFF] text-xs font-bold">COPY</button>
                </div>
                <textarea id="resultText" readonly class="w-full h-80 p-5 font-mono text-[11px] text-gray-300 bg-transparent"></textarea>
            </div>
        </div>
    </main>

    <!-- SETTINGS OVERLAY -->
    <div id="settingsOverlay" class="fixed inset-0 bg-[#0F0E13] z-[60] p-6 transition-transform duration-500 translate-y-full flex flex-col">
        <div class="flex items-center justify-between mb-8">
            <button onclick="toggleSettings()" class="text-2xl text-white"><i class="fas fa-times"></i></button>
            <h2 class="text-xl font-bold">Menu</h2>
            <div></div>
        </div>

        <!-- NEW DOWNLOAD SECTION -->
        <div class="mb-8" id="installContainer">
            <p class="text-[10px] font-bold text-[#D0BCFF] uppercase mb-3 text-center">Get the Full App Experience</p>
            <button onclick="installPWA()" id="installBtn" class="download-btn w-full">
                <i class="fas fa-cloud-download-alt"></i>
                DOWNLOAD APP
            </button>
            <p id="iosNote" class="hidden text-[11px] text-center mt-4 text-white/50 px-4">
                To download on iPhone: <br>Tap the <i class="fas fa-share-square"></i> icon then <b>"Add to Home Screen"</b>
            </p>
        </div>
        
        <div class="glass-card p-5 mb-6">
            <label class="text-xs font-bold text-[#D0BCFF] mb-3 block">Engine Model</label>
            <div class="input-box"><input type="text" id="customModel" class="w-full bg-transparent outline-none"></div>
        </div>

        <h3 class="font-bold text-sm text-[#D0BCFF] mb-4 uppercase">Recent Designs</h3>
        <div id="historyList" class="space-y-3 flex-1 overflow-y-auto"></div>
    </div>

    <div id="toast">Copied!</div>

    <script>
        const _k = "c2stb3ItdjEtYjE1YTYwNzA4ZDcwNWE3NzkxNzJjZDY3ZWI3NTkzYjM5MTBhZmVjMWY5NDY4MWFlYWQ0YzdhOWNiZjgzMmRhZQ==";

        // PWA INSTALL LOGIC
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            // The button will now work when clicked
        });

        async function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') deferredPrompt = null;
            } else {
                showToast("Use browser menu to install");
            }
        }

        // Detecting iOS
        if (/iPhone|iPad|iPod/.test(navigator.userAgent) && !window.navigator.standalone) {
            document.getElementById('installBtn').style.display = 'none';
            document.getElementById('iosNote').classList.remove('hidden');
        }

        window.addEventListener('load', () => {
            setTimeout(() => {
                const splash = document.getElementById('splash-screen');
                splash.style.opacity = '0';
                setTimeout(() => splash.style.visibility = 'hidden', 500);
            }, 1500);
            document.getElementById('customModel').value = localStorage.getItem('app_model') || "anthropic/claude-3.5-sonnet";
            renderHistory();
        });

        function toggleSettings() { document.getElementById('settingsOverlay').classList.toggle('translate-y-full'); }

        async function generatePrompt() {
            const idea = document.getElementById('websiteIdea').value;
            const model = document.getElementById('customModel').value;
            if(!idea) return showToast("Describe your idea!");

            const btn = document.getElementById('mainBtn');
            const loader = document.getElementById('loader');
            btn.disabled = true; loader.classList.remove('hidden');

            try {
                const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: { "Authorization": `Bearer ${atob(_k)}`, "Content-Type": "application/json" },
                    body: JSON.stringify({
                        "model": model,
                        "messages": [
                            { "role": "system", "content": "You are a World-Class HTML Web Architect. Create a powerful 'Meta-Prompt' for a single-file mobile website." },
                            { "role": "user", "content": `Create architecture for: ${idea}` }
                        ]
                    })
                });
                const data = await response.json();
                const result = data.choices[0].message.content + "\n\ncreate the HTML code for mobile in one code block";
                document.getElementById('resultText').value = result;
                document.getElementById('outputContainer').classList.remove('hidden');
                saveLog(idea, result);
            } catch (err) { alert(err.message); } 
            finally { btn.disabled = false; loader.classList.add('hidden'); }
        }

        function saveLog(idea, prompt) {
            let logs = JSON.parse(localStorage.getItem('app_logs') || '[]');
            logs.unshift({ idea, prompt, date: new Date().toLocaleTimeString() });
            localStorage.setItem('app_logs', JSON.stringify(logs.slice(0, 10)));
            renderHistory();
        }

        function renderHistory() {
            const list = document.getElementById('historyList');
            const logs = JSON.parse(localStorage.getItem('app_logs') || '[]');
            list.innerHTML = logs.map((log, i) => `
                <div class="bg-white/5 p-4 rounded-2xl flex justify-between border border-white/5" onclick="loadLog(${i})">
                    <p class="text-sm font-semibold truncate flex-1">${log.idea}</p>
                    <i class="fas fa-chevron-right text-white/20"></i>
                </div>
            `).join('');
        }

        function loadLog(i) {
            const logs = JSON.parse(localStorage.getItem('app_logs') || '[]');
            document.getElementById('websiteIdea').value = logs[i].idea;
            document.getElementById('resultText').value = logs[i].prompt;
            document.getElementById('outputContainer').classList.remove('hidden');
            toggleSettings();
        }

        function copyToClipboard() {
            const area = document.getElementById('resultText');
            area.select();
            navigator.clipboard.writeText(area.value);
            showToast("Copied to clipboard!");
        }

        function showToast(msg) {
            const t = document.getElementById("toast");
            t.innerText = msg; t.classList.add("show");
            setTimeout(() => t.classList.remove("show"), 3000);
        }
    </script>
</body>
</html>